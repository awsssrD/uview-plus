import{l as e,n as r,m as t,f as s,J as l,o,c as i,w as h,h as a,z as n,i as c,p as d,q as f,s as u,y as p,a as m,u as g,I as b}from"./index-Cc_JEQgt.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";const y=w({name:"u-list-item",mixins:[t,s,e({props:{anchor:{type:[String,Number],default:()=>r.listItem.anchor}}})],data:()=>({rect:{},index:0,show:!0,sys:l()}),computed:{},inject:["uList"],watch:{"uList.innerScrollTop"(e){const r=this.uList.preLoadScreen,t=this.sys.windowHeight;e<=t*r?this.parent.updateOffsetFromChild(0):this.rect.top<=e-t*r&&this.parent.updateOffsetFromChild(this.rect.top)}},created(){this.parent={}},mounted(){this.init()},methods:{init(){this.updateParentData(),this.index=this.parent.children.indexOf(this),this.resize()},updateParentData(){this.getParentData("u-list")},resize(){this.queryRect(`u-list-item-${this.anchor}`).then((e=>{const r=this.parent.children[this.index-1];this.rect=e;const t=this.uList.preLoadScreen,s=this.sys.windowHeight;r&&(this.rect.top=r.rect.top+r.rect.height),e.top>=this.uList.innerScrollTop+(1+t)*s&&(this.show=!1)}))},queryRect(e){return new Promise((r=>{this.$uGetRect(`.${e}`).then((e=>{r(e)}))}))}}},[["render",function(e,r,t,s,l,d){const f=c;return o(),i(f,{class:n(["u-list-item",[`u-list-item-${e.anchor}`]]),ref:`u-list-item-${e.anchor}`,anchor:`u-list-item-${e.anchor}`},{default:h((()=>[a(e.$slots,"default",{},void 0,!0)])),_:3},8,["anchor","class"])}],["__scopeId","data-v-03533c37"]]);const S=w({name:"u-list",mixins:[t,s,e({props:{showScrollbar:{type:Boolean,default:()=>r.list.showScrollbar},lowerThreshold:{type:[String,Number],default:()=>r.list.lowerThreshold},upperThreshold:{type:[String,Number],default:()=>r.list.upperThreshold},scrollTop:{type:[String,Number],default:()=>r.list.scrollTop},offsetAccuracy:{type:[String,Number],default:()=>r.list.offsetAccuracy},enableFlex:{type:Boolean,default:()=>r.list.enableFlex},pagingEnabled:{type:Boolean,default:()=>r.list.pagingEnabled},scrollable:{type:Boolean,default:()=>r.list.scrollable},scrollIntoView:{type:String,default:()=>r.list.scrollIntoView},scrollWithAnimation:{type:Boolean,default:()=>r.list.scrollWithAnimation},enableBackToTop:{type:Boolean,default:()=>r.list.enableBackToTop},height:{type:[String,Number],default:()=>r.list.height},width:{type:[String,Number],default:()=>r.list.width},preLoadScreen:{type:[String,Number],default:()=>r.list.preLoadScreen},refresherEnabled:{type:Boolean,default:()=>!1},refresherThreshold:{type:Number,default:()=>45},refresherDefaultStyle:{type:String,default:()=>"black"},refresherBackground:{type:String,default:()=>"#FFF"},refresherTriggered:{type:Boolean,default:()=>!1}}})],watch:{scrollIntoView(e){this.scrollIntoViewById(e)}},data:()=>({innerScrollTop:0,offset:0,sys:l()}),computed:{listStyle(){const e={};return 0!=this.width&&(e.width=d(this.width)),0!=this.height&&(e.height=d(this.height)),e.height||(e.height=d(this.sys.windowHeight,"px")),f(e,u(this.customStyle))}},provide(){return{uList:this}},created(){this.refs=[],this.children=[],this.anchors=[]},mounted(){},emits:["scroll","scrolltolower","scrolltoupper","refresherpulling","refresherrefresh","refresherrestore","refresherabort"],methods:{updateOffsetFromChild(e){this.offset=e},onScroll(e){let r=0;r=e.detail.scrollTop,this.innerScrollTop=r,this.$emit("scroll",Math.abs(r))},scrollIntoViewById(e){},scrolltolower(e){p(30).then((()=>{this.$emit("scrolltolower")}))},scrolltoupper(e){p(30).then((()=>{this.$emit("scrolltoupper"),this.offset=0}))},refresherpulling(e){this.$emit("refresherpulling",e)},refresherrefresh(e){this.$emit("refresherrefresh",e)},refresherrestore(e){this.$emit("refresherrestore",e)},refresherabort(e){this.$emit("refresherabort",e)}}},[["render",function(e,r,t,s,l,n){const d=c,f=b;return o(),i(f,{class:"u-list","scroll-into-view":e.scrollIntoView,style:g([n.listStyle]),"scroll-y":e.scrollable,"scroll-top":Number(e.scrollTop),"lower-threshold":Number(e.lowerThreshold),"upper-threshold":Number(e.upperThreshold),"show-scrollbar":e.showScrollbar,"enable-back-to-top":e.enableBackToTop,"scroll-with-animation":e.scrollWithAnimation,onScroll:n.onScroll,onScrolltolower:n.scrolltolower,onScrolltoupper:n.scrolltoupper,"refresher-enabled":e.refresherEnabled,"refresher-threshold":e.refresherThreshold,"refresher-default-style":e.refresherDefaultStyle,"refresher-background":e.refresherBackground,"refresher-triggered":e.refresherTriggered,onRefresherpulling:n.refresherpulling,onRefresherrefresh:n.refresherrefresh,onRefresherrestore:n.refresherrestore,onRefresherabort:n.refresherabort,"scroll-anchoring":!0},{default:h((()=>[m(d,null,{default:h((()=>[a(e.$slots,"default",{},void 0,!0)])),_:3})])),_:3},8,["scroll-into-view","style","scroll-y","scroll-top","lower-threshold","upper-threshold","show-scrollbar","enable-back-to-top","scroll-with-animation","onScroll","onScrolltolower","onScrolltoupper","refresher-enabled","refresher-threshold","refresher-default-style","refresher-background","refresher-triggered","onRefresherpulling","onRefresherrefresh","onRefresherrestore","onRefresherabort"])}],["__scopeId","data-v-e00a7a91"]]);export{y as _,S as a};
