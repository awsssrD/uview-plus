import{l as e,n as t,m as a,f as l,s,x as i,o,c as u,w as n,b as d,a as h,u as c,v as r,j as m,t as g,h as p,z as b,F as _,i as f,k as v,a2 as V,r as k,A as y}from"./index-DdOP8p5T.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{r as w}from"./uni-app.es.D3CldudY.js";import{_ as C}from"./u-button.BeSaueu-.js";import"./u-loading-icon.RenRT56m.js";import"./u-icon.ohOTLwIJ.js";const S=x({name:"u-slider",mixins:[a,l,e({props:{min:{type:[Number,String],default:()=>t.slider.min},max:{type:[Number,String],default:()=>t.slider.max},step:{type:[Number,String],default:()=>t.slider.step},modelValue:{type:[String,Number],default:()=>t.slider.value},isRange:{type:Boolean,default:!1},rangeValue:{type:[Array],default:[0,0]},activeColor:{type:String,default:()=>t.slider.activeColor},inactiveColor:{type:String,default:()=>t.slider.inactiveColor},blockSize:{type:[Number,String],default:()=>t.slider.blockSize},blockColor:{type:String,default:()=>t.slider.blockColor},blockStyle:{type:Object,default:()=>t.slider.blockStyle},disabled:{type:Boolean,default:()=>t.slider.disabled},showValue:{type:Boolean,default:()=>t.slider.showValue},useNative:{type:Boolean,default:()=>t.slider.useNative},height:{type:String,default:()=>t.slider.height}}})],emits:["start","changing","change","update:modelValue"],data:()=>({startX:0,status:"end",newValue:0,distanceX:0,startValue0:0,startValue:0,barStyle0:{},barStyle:{},sliderRect:{left:0,width:0}}),watch:{modelValue(e){"end"==this.status&&this.updateValue(this.modelValue,!1)}},created(){},async mounted(){this.useNative||this.$uGetRect(".u-slider__base").then((e=>{this.sliderRect=e,this.init()}))},methods:{addStyle:s,getPx:i,init(){this.isRange?(this.updateValue(this.rangeValue[0],!1,0),this.updateValue(this.rangeValue[1],!1,1)):this.updateValue(this.modelValue,!1)},changingHandler(e){const{value:t}=e.detail;this.$emit("update:modelValue",t),this.$emit("changing",t)},changeHandler(e){const{value:t}=e.detail;this.$emit("update:modelValue",t),this.$emit("change",t)},onTouchStart(e,t=1){if(this.disabled)return;this.startX=0;let a=e.touches[0];this.startX=a.clientX,this.isRange?(this.startValue0=this.format(this.rangeValue[0],0),this.startValue=this.format(this.rangeValue[1],1)):this.startValue=this.format(this.modelValue),this.status="start";let l=0;l=a.clientX,this.distanceX=l-this.sliderRect.left,this.newValue=this.distanceX/this.sliderRect.width*(this.max-this.min)+parseFloat(this.min),this.status="moving",this.$emit("changing"),this.updateValue(this.newValue,!0,t)},onTouchMove(e,t=1){if(this.disabled)return;"start"==this.status&&this.$emit("start");let a=e.touches[0];console.log("touchs",a);let l=0;l=a.clientX,this.distanceX=l-this.sliderRect.left,this.newValue=this.distanceX/this.sliderRect.width*(this.max-this.min)+parseFloat(this.min),this.status="moving",this.$emit("changing"),this.updateValue(this.newValue,!0,t)},onTouchEnd(e,t=1){this.disabled||("moving"===this.status&&(this.updateValue(this.newValue,!1,t),this.$emit("change")),this.status="end")},onTouchStart2(e,t=1){this.isRange||this.onChangeStart(e,t)},onTouchMove2(e,t=1){this.isRange||this.onTouchMove(e,t)},onTouchEnd2(e,t=1){this.isRange||this.onTouchEnd(e,t)},onClick(e){if(this.disabled)return;let t=e.detail.x-this.sliderRect.left;this.newValue=t/this.sliderRect.width*(this.max-this.min)+parseFloat(this.min),this.updateValue(this.newValue,!1,1)},updateValue(e,t,a=1){let l=this.format(e,a);l>this.max&&(l=this.max);let s={width:Math.min((l-this.min)/(this.max-this.min)*this.sliderRect.width,this.sliderRect.width)+"px"};switch(1==t?s.transition="none":delete s.transition,this.isRange?(this.rangeValue[a]=l,this.$emit("update:modelValue",this.rangeValue)):this.$emit("update:modelValue",l),a){case 0:this.barStyle0={...s};break;case 1:this.barStyle={...s}}},format(e,t=1){if(!this.isRange)return Math.round(Math.max(this.min,Math.min(e,this.max))/this.step)*this.step;switch(t){case 0:return Math.round(Math.max(this.min,Math.min(e,this.rangeValue[1]-this.step,this.max))/this.step)*this.step;case 1:return Math.round(Math.max(this.min,this.rangeValue[0]+this.step,Math.min(e,this.max))/this.step)*this.step}}}},[["render",function(e,t,a,l,s,i){const k=f,y=v,x=V;return o(),u(k,{class:"u-slider",style:c([i.addStyle(e.customStyle)])},{default:n((()=>[!e.useNative||e.isRange?(o(),d(_,{key:0},[h(k,{ref:"u-slider-inner",class:b(["u-slider-inner",[e.disabled?"u-slider--disabled":""]]),onClick:i.onClick,onOnTouchStart:t[4]||(t[4]=e=>i.onTouchStart2(e,1)),onTouchmove:t[5]||(t[5]=e=>i.onTouchMove2(e,1)),onTouchend:t[6]||(t[6]=e=>i.onTouchEnd2(e,1)),onTouchcancel:t[7]||(t[7]=e=>i.onTouchEnd2(e,1)),style:c({height:e.isRange&&e.showValue?i.getPx(e.blockSize)+24+"px":i.getPx(e.blockSize)+"px"})},{default:n((()=>[h(k,{ref:"u-slider__base",class:"u-slider__base",style:c([{height:e.height,backgroundColor:e.inactiveColor}])},null,8,["style"]),h(k,{onClick:i.onClick,class:"u-slider__gap",style:c([s.barStyle,{height:e.height,marginTop:"-"+e.height,backgroundColor:e.activeColor}])},null,8,["onClick","style"]),e.isRange?(o(),u(k,{key:0,class:"u-slider__gap u-slider__gap-0",style:c([s.barStyle0,{height:e.height,marginTop:"-"+e.height,backgroundColor:e.inactiveColor}])},null,8,["style"])):r("",!0),e.isRange&&e.showValue?(o(),u(y,{key:1,class:"u-slider__show-range-value",style:c({left:i.getPx(s.barStyle0.width)+i.getPx(e.blockSize)/2+"px"})},{default:n((()=>[m(g(this.rangeValue[0]),1)])),_:1},8,["style"])):r("",!0),e.isRange&&e.showValue?(o(),u(y,{key:2,class:"u-slider__show-range-value",style:c({left:i.getPx(s.barStyle.width)+i.getPx(e.blockSize)/2+"px"})},{default:n((()=>[m(g(this.rangeValue[1]),1)])),_:1},8,["style"])):r("",!0),e.isRange?(o(),u(k,{key:3,class:"u-slider__button-wrap u-slider__button-wrap-0",onTouchstart:t[0]||(t[0]=e=>i.onTouchStart(e,0)),onTouchmove:t[1]||(t[1]=e=>i.onTouchMove(e,0)),onTouchend:t[2]||(t[2]=e=>i.onTouchEnd(e,0)),onTouchcancel:t[3]||(t[3]=e=>i.onTouchEnd(e,0)),style:c({left:i.getPx(s.barStyle0.width)+i.getPx(e.blockSize)/2+"px"})},{default:n((()=>[e.$slots.default||e.$slots.$default?p(e.$slots,"default",{key:0},void 0,!0):(o(),u(k,{key:1,class:"u-slider__button",style:c([e.blockStyle,{height:i.getPx(e.blockSize,!0),width:i.getPx(e.blockSize,!0),backgroundColor:e.blockColor}])},null,8,["style"]))])),_:3},8,["style"])):r("",!0),h(k,{class:"u-slider__button-wrap",onTouchstart:i.onTouchStart,onTouchmove:i.onTouchMove,onTouchend:i.onTouchEnd,onTouchcancel:i.onTouchEnd,style:c({left:i.getPx(s.barStyle.width)+i.getPx(e.blockSize)/2+"px"})},{default:n((()=>[e.$slots.default||e.$slots.$default?p(e.$slots,"default",{key:0},void 0,!0):(o(),u(k,{key:1,class:"u-slider__button",style:c([e.blockStyle,{height:i.getPx(e.blockSize,!0),width:i.getPx(e.blockSize,!0),backgroundColor:e.blockColor}])},null,8,["style"]))])),_:3},8,["onTouchstart","onTouchmove","onTouchend","onTouchcancel","style"])])),_:3},8,["onClick","class","style"]),e.showValue&&!e.isRange?(o(),u(k,{key:0,class:"u-slider__show-value"},{default:n((()=>[m(g(e.modelValue),1)])),_:1})):r("",!0)],64)):(o(),u(x,{key:1,class:"u-slider__native",min:e.min,max:e.max,step:e.step,value:e.modelValue,activeColor:e.activeColor,backgroundColor:e.inactiveColor,blockSize:i.getPx(e.blockSize),blockColor:e.blockColor,showValue:e.showValue,disabled:e.disabled,onChanging:i.changingHandler,onChange:i.changeHandler},null,8,["min","max","step","value","activeColor","backgroundColor","blockSize","blockColor","showValue","disabled","onChanging","onChange"]))])),_:3},8,["style"])}],["__scopeId","data-v-45f1a190"]]);const T=x({data:()=>({useNative:!1,value1:30,value2:30,value3:30,value4:30,value5:30,value6:[10,20]}),watch:{value1(e){}},methods:{moving(e){},click(e){},end(e){},start(e){}}},[["render",function(e,t,a,l,s,i){const c=v,r=w(k("up-slider"),S),g=f,p=w(k("up-button"),C);return o(),u(g,{class:"u-page"},{default:n((()=>[h(g,{class:"u-demo-block"},{default:n((()=>[h(c,{class:"u-demo-block__title"},{default:n((()=>[m("基本案例")])),_:1}),h(g,{class:"u-page__slide-item"},{default:n((()=>[h(r,{useNative:s.useNative,modelValue:s.value1,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value1=e)},null,8,["useNative","modelValue"])])),_:1}),h(p,{text:"前进",onClick:t[1]||(t[1]=e=>s.value1=s.value1+1)})])),_:1}),h(g,{class:"u-demo-block"},{default:n((()=>[h(c,{class:"u-demo-block__title"},{default:n((()=>[m("自定义范围(10—50)")])),_:1}),h(g,{class:"u-page__slide-item"},{default:n((()=>[h(r,{useNative:s.useNative,modelValue:s.value2,"onUpdate:modelValue":t[2]||(t[2]=e=>s.value2=e),showValue:"",min:"10",max:"50"},null,8,["useNative","modelValue"])])),_:1})])),_:1}),h(g,{class:"u-demo-block"},{default:n((()=>[h(c,{class:"u-demo-block__title"},{default:n((()=>[m("指定步长(每次步进5)")])),_:1}),h(g,{class:"u-page__slide-item"},{default:n((()=>[h(r,{useNative:s.useNative,modelValue:s.value4,"onUpdate:modelValue":t[3]||(t[3]=e=>s.value4=e),step:5},null,8,["useNative","modelValue"])])),_:1})])),_:1}),h(g,{class:"u-demo-block"},{default:n((()=>[h(c,{class:"u-demo-block__title"},{default:n((()=>[m("自定义样式")])),_:1}),h(g,{class:"u-page__slide-item"},{default:n((()=>[h(r,{modelValue:s.value5,"onUpdate:modelValue":t[4]||(t[4]=e=>s.value5=e),activeColor:"#deab8a",blockColor:"#f47920",height:"20px"},null,8,["modelValue"])])),_:1})])),_:1}),h(g,{class:"u-demo-block"},{default:n((()=>[h(c,{class:"u-demo-block__title"},{default:n((()=>[m("自定义样式(图片)")])),_:1}),h(g,{class:"u-page__slide-item"},{default:n((()=>[h(r,{modelValue:s.value5,"onUpdate:modelValue":t[5]||(t[5]=e=>s.value5=e),activeColor:"#deab8a",blockColor:"#f47920",height:"4px"},{default:n((()=>[h(g,null,{default:n((()=>[(o(),d("svg",{t:"1722094047017",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"11063",width:"32",height:"32"},[y("path",{d:"M965.12 469.333333c-81.493333-90.88-230.186667-149.333333-378.453333-149.333333h-6.826667a193.28 193.28 0 0 0-289.493333-109.226667 188.373333 188.373333 0 0 0-51.2 47.36 42.666667 42.666667 0 0 0-2.773334 45.653334 42.666667 42.666667 0 0 0 42.666667 21.333333A149.333333 149.333333 0 0 1 384 355.626667l-16.426667 6.4A42.666667 42.666667 0 0 0 341.333333 401.28v221.44A42.666667 42.666667 0 0 0 367.36 661.333333l16.64 7.466667a150.4 150.4 0 0 1-106.666667 30.506667 42.666667 42.666667 0 0 0-42.666666 21.333333 42.666667 42.666667 0 0 0 2.773333 45.866667 187.946667 187.946667 0 0 0 51.2 47.36 194.56 194.56 0 0 0 103.893333 29.653333A192 192 0 0 0 580.053333 704h6.613334c149.333333 0 296.96-58.666667 378.453333-149.333333a64 64 0 0 0 0-85.333334z m-535.68-130.773333a192 192 0 0 0-155.946667-55.04 146.133333 146.133333 0 0 1 39.68-36.693333 152.533333 152.533333 0 0 1 176.213334 10.24 149.333333 149.333333 0 0 1 46.293333 65.28 615.04 615.04 0 0 0-104.746667 18.346666 20.053333 20.053333 0 0 0-1.493333-2.133333zM489.173333 768a152.32 152.32 0 0 1-176.213333 10.24 135.893333 135.893333 0 0 1-38.826667-36.266667 192 192 0 0 0 155.093334-55.466666 21.333333 21.333333 0 0 0 2.133333-3.84 615.466667 615.466667 0 0 0 104.533333 18.346666A149.333333 149.333333 0 0 1 489.173333 768z m444.16-242.133333C859.52 608.213333 723.413333 661.333333 586.666667 661.333333a546.773333 546.773333 0 0 1-202.666667-38.613333V401.28A549.76 549.76 0 0 1 586.666667 362.666667c136.746667 0 272.853333 53.12 346.666666 135.466666a21.333333 21.333333 0 0 1 0 27.733334z",fill:"#CE4141","p-id":"11064"}),y("path",{d:"M682.666667 426.666667a85.333333 85.333333 0 1 0 85.333333 85.333333 85.333333 85.333333 0 0 0-85.333333-85.333333z m0 128a42.666667 42.666667 0 1 1 42.666666-42.666667 42.666667 42.666667 0 0 1-42.666666 42.666667zM128 448h149.333333a21.333333 21.333333 0 0 0 0-42.666667H128a21.333333 21.333333 0 0 0 0 42.666667zM298.666667 597.333333a21.333333 21.333333 0 0 0-21.333334-21.333333H192a21.333333 21.333333 0 0 0 0 42.666667h85.333333a21.333333 21.333333 0 0 0 21.333334-21.333334zM298.666667 512a21.333333 21.333333 0 0 0-21.333334-21.333333H64a21.333333 21.333333 0 0 0 0 42.666666h213.333333a21.333333 21.333333 0 0 0 21.333334-21.333333z",fill:"#CE4141","p-id":"11065"}),y("path",{d:"M448 426.666667m-21.333333 0a21.333333 21.333333 0 1 0 42.666666 0 21.333333 21.333333 0 1 0-42.666666 0Z",fill:"#CE4141","p-id":"11066"}),y("path",{d:"M448 512m-21.333333 0a21.333333 21.333333 0 1 0 42.666666 0 21.333333 21.333333 0 1 0-42.666666 0Z",fill:"#CE4141","p-id":"11067"}),y("path",{d:"M448 597.333333m-21.333333 0a21.333333 21.333333 0 1 0 42.666666 0 21.333333 21.333333 0 1 0-42.666666 0Z",fill:"#CE4141","p-id":"11068"})]))])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),h(g,{class:"u-demo-block"},{default:n((()=>[h(c,{class:"u-demo-block__title"},{default:n((()=>[m("区间选择(双滑块)")])),_:1}),h(g,{class:"u-page__slide-item"},{default:n((()=>[h(r,{isRange:"",showValue:"",rangeValue:s.value6,"onUpdate:rangeValue":t[6]||(t[6]=e=>s.value6=e),height:"2px"},null,8,["rangeValue"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-3afbb5eb"]]);export{T as default};
