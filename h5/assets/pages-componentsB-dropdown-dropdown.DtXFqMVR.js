import{_ as e}from"./u-icon.DwBF2lj0.js";import{l as t,m as o,f as l,p as a,$ as i,r as s,o as n,c,w as u,u as d,a as r,b as h,d as p,F as m,h as _,E as f,v,i as g,I as b,J as C,z as k,j as y,t as w,k as S}from"./index-CnFxcOhE.js";import{r as x}from"./uni-app.es.BxD5sEAM.js";import{_ as $}from"./u-cell.tY_Xjvjd.js";import{_ as I}from"./u-cell-group.DK25spol.js";import{_ as B}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as z}from"./u-button.CmwtJBg0.js";import{_ as j}from"./u-subsection.BME5StL8.js";import"./u-line.C9C4zuUw.js";import"./u-loading-icon.BaFuCKO2.js";const V=B({name:"u-dropdown-item",mixins:[o,l,t({props:{modelValue:{type:[Number,String,Array],default:""},title:{type:[String,Number],default:""},options:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},height:{type:[Number,String],default:"auto"},closeOnClickOverlay:{type:Boolean,default:!0}}})],options:{styleIsolation:"shared"},data:()=>({active:!1,activeColor:"#2979ff",inactiveColor:"#606266"}),computed:{propsChange(){return`${this.title}-${this.disabled}`}},watch:{propsChange(e){this.parent&&this.parent.init()}},created(){this.parent=!1},emits:["update:modelValue","change"],methods:{addUnit:a,init(){let e=i.call(this,"u-dropdown");if(e){this.parent=e,this.activeColor=e.activeColor,this.inactiveColor=e.inactiveColor,e.children.find((e=>this===e))||e.children.push(this),1==e.children.length&&(this.active=!0),e.menuList.push({title:this.title,disabled:this.disabled})}},cellClick(e){this.$emit("update:modelValue",e),this.parent.close(),this.$emit("change",e)}},mounted(){this.init()}},[["render",function(t,o,l,a,i,C){const k=x(s("up-icon"),e),y=x(s("up-cell"),$),w=x(s("up-cell-group"),I),S=g,B=b;return i.active?(n(),c(S,{key:0,class:"u-dropdown-item",onTouchmove:f((()=>{}),["stop","prevent"]),onClick:f((()=>{}),["stop","prevent"])},{default:u((()=>[t.$slots.default||t.$slots.$default?_(t.$slots,"default",{key:1},void 0,!0):(n(),c(B,{key:0,class:"u-dropdown-item__scroll","scroll-y":"true",style:d({height:C.addUnit(t.height)})},{default:u((()=>[r(S,{class:"u-dropdown-item__options"},{default:u((()=>[r(w,null,{default:u((()=>[(n(!0),h(m,null,p(t.options,((e,o)=>(n(),c(y,{onClick:t=>C.cellClick(e.value),arrow:!1,title:e.label,key:o,"title-style":{color:t.modelValue==e.value?i.activeColor:i.inactiveColor}},{default:u((()=>[t.modelValue==e.value?(n(),c(k,{key:0,name:"checkbox-mark",color:i.activeColor,size:"32"},null,8,["color"])):v("",!0)])),_:2},1032,["onClick","title","title-style"])))),128))])),_:1})])),_:1})])),_:1},8,["style"]))])),_:3})):v("",!0)}],["__scopeId","data-v-1f77cce4"]]);const U=B({name:"u-dropdown",mixins:[o,l,t({props:{activeColor:{type:String,default:"#2979ff"},inactiveColor:{type:String,default:"#606266"},closeOnClickMask:{type:Boolean,default:!0},closeOnClickSelf:{type:Boolean,default:!0},duration:{type:[Number,String],default:300},height:{type:[Number,String],default:40},borderBottom:{type:Boolean,default:!1},titleSize:{type:[Number,String],default:14},borderRadius:{type:[Number,String],default:0},menuIcon:{type:String,default:"arrow-down"},menuIconSize:{type:[Number,String],default:14}}})],data:()=>({showDropdown:!0,menuList:[],active:!1,current:99999,contentStyle:{zIndex:-1,opacity:0},highlightIndex:99999,contentHeight:0}),computed:{popupStyle(){let e={};return e.transform=`translateY(${this.active?0:"-100%"})`,e["transition-duration"]=this.duration/1e3+"s",e.borderRadius=`0 0 ${a(this.borderRadius)} ${a(this.borderRadius)}`,e}},created(){this.children=[]},mounted(){this.getContentHeight()},emits:["open","close"],methods:{addUnit:a,init(){this.menuList=[],this.children.map((e=>{e.init()}))},menuClick(e){if(!this.menuList[e].disabled)return e===this.current&&this.closeOnClickSelf?(this.close(),void setTimeout((()=>{this.children[e].active=!1}),this.duration)):void this.open(e)},open(e){this.contentHeight<1&&this.getContentHeight(),this.contentStyle={zIndex:11},this.active=!0,this.current=e,this.children.map(((t,o)=>{t.active=e==o})),this.$emit("open",this.current)},close(){this.$emit("close",this.current),this.active=!1,this.current=99999,this.contentStyle={zIndex:-1,opacity:0}},maskClick(){this.closeOnClickMask&&this.close()},highlight(e=void 0){this.highlightIndex=void 0!==e?e:99999},getContentHeight(){let e=C().windowHeight;this.$uGetRect(".u-dropdown__menu").then((t=>{this.contentHeight=e-t.bottom}))}}},[["render",function(t,o,l,a,i,v){const b=S,C=x(s("u-icon"),e),$=g;return n(),c($,{class:"u-dropdown"},{default:u((()=>[r($,{class:k(["u-dropdown__menu",{"u-border-bottom":t.borderBottom}]),style:d({height:v.addUnit(t.height)})},{default:u((()=>[(n(!0),h(m,null,p(i.menuList,((e,o)=>(n(),c($,{class:"u-dropdown__menu__item",key:o,onClick:f((e=>v.menuClick(o)),["stop"])},{default:u((()=>[r($,{class:"u-flex u-flex-row"},{default:u((()=>[r(b,{class:"u-dropdown__menu__item__text",style:d({color:e.disabled?"#c0c4cc":o===i.current||i.highlightIndex==o?t.activeColor:t.inactiveColor,fontSize:v.addUnit(t.titleSize)})},{default:u((()=>[y(w(e.title),1)])),_:2},1032,["style"]),r($,{class:k(["u-dropdown__menu__item__arrow",{"u-dropdown__menu__item__arrow--rotate":o===i.current}])},{default:u((()=>[r(C,{"custom-style":{display:"flex"},name:t.menuIcon,size:v.addUnit(t.menuIconSize),color:o===i.current||i.highlightIndex==o?t.activeColor:"#c0c4cc"},null,8,["name","size","color"])])),_:2},1032,["class"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1},8,["style","class"]),r($,{class:"u-dropdown__content",style:d([i.contentStyle,{transition:`opacity ${t.duration/1e3}s linear`,top:v.addUnit(t.height),height:i.contentHeight+"px"}]),onClick:v.maskClick,onTouchmove:o[1]||(o[1]=f((()=>{}),["stop","prevent"]))},{default:u((()=>[r($,{onClick:o[0]||(o[0]=f((()=>{}),["stop","prevent"])),class:"u-dropdown__content__popup",style:d([v.popupStyle])},{default:u((()=>[_(t.$slots,"default",{},void 0,!0)])),_:3},8,["style"]),r($,{class:"u-dropdown__content__mask"})])),_:3},8,["style","onClick"])])),_:3})}],["__scopeId","data-v-ed0753a4"]]);const H=B({data:()=>({value1:"",value2:"2",mask:!0,options1:[{label:"默认排序",value:1},{label:"距离优先",value:2},{label:"价格优先",value:3}],options2:[{label:"去冰",value:1},{label:"加冰",value:2},{label:"正常温",value:3},{label:"加热",value:4},{label:"极寒风暴",value:5}],list:[{label:"琪花瑶草",active:!0},{label:"清词丽句",active:!1},{label:"宛转蛾眉",active:!1},{label:"煦色韶光",active:!1},{label:"鱼沉雁落",active:!1},{label:"章台杨柳",active:!1},{label:"霞光万道",active:!1}],borderBottom:!1,activeColor:"#2979ff"}),methods:{borderChange(e){this.borderBottom=!e},activeColorChange(e){this.activeColor=["#2979ff","#ff9900","#19be6b"][e]},change(e){this.$u.toast(`点击了第${e}项`)},closeDropdown(){this.$refs.uDropdownRef.close()},tagClick(e){this.list[e].active=!this.list[e].active},maskChange(e){this.mask=!e}}},[["render",function(e,t,o,l,a,i){const d=x(s("up-dropdown-item"),V),_=g,f=x(s("up-button"),z),v=x(s("up-dropdown"),U),b=S,C=x(s("up-subsection"),j);return n(),c(_,{class:"u-page"},{default:u((()=>[r(_,{class:"u-m-p-50"},{default:u((()=>[r(_,{class:"u-demo-area u-flex u-row-center"},{default:u((()=>[r(v,{"close-on-click-mask":a.mask,ref:"uDropdownRef",activeColor:a.activeColor,borderBottom:a.borderBottom},{default:u((()=>[r(d,{onChange:i.change,modelValue:a.value1,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value1=e),title:"距离",options:a.options1},null,8,["onChange","modelValue","options"]),r(d,{onChange:i.change,modelValue:a.value2,"onUpdate:modelValue":t[1]||(t[1]=e=>a.value2=e),title:"温度",options:a.options2},null,8,["onChange","modelValue","options"]),r(d,{title:"属性"},{default:u((()=>[r(_,{class:"slot-content"},{default:u((()=>[r(_,{class:"item-box"},{default:u((()=>[(n(!0),h(m,null,p(a.list,((e,t)=>(n(),c(_,{class:k(["item",[e.active?"active":""]]),onClick:e=>i.tagClick(t),key:t},{default:u((()=>[y(w(e.label),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),r(f,{type:"primary",onClick:i.closeDropdown},{default:u((()=>[y("确定")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["close-on-click-mask","activeColor","borderBottom"])])),_:1})])),_:1}),r(_,{class:"u-config-wrap"},{default:u((()=>[r(_,{class:"u-demo-block"},{default:u((()=>[r(b,{class:"u-demo-block__title"},{default:u((()=>[y("参数配置")])),_:1})])),_:1}),r(_,{class:"u-demo-block"},{default:u((()=>[r(b,{class:"u-demo-block__title"},{default:u((()=>[y("下边框")])),_:1}),r(_,{class:"u-demo-block__content"},{default:u((()=>[r(C,{current:"1",list:["有","无"],onChange:i.borderChange},null,8,["onChange"])])),_:1})])),_:1}),r(_,{class:"u-demo-block"},{default:u((()=>[r(b,{class:"u-demo-block__title"},{default:u((()=>[y("激活颜色")])),_:1}),r(_,{class:"u-demo-block__content"},{default:u((()=>[r(C,{list:["#2979ff","#ff9900","#19be6b"],onChange:i.activeColorChange},null,8,["onChange"])])),_:1})])),_:1}),r(_,{class:"u-demo-block"},{default:u((()=>[r(b,{class:"u-demo-block__title"},{default:u((()=>[y("遮罩是否可点击")])),_:1}),r(_,{class:"u-demo-block__content"},{default:u((()=>[r(C,{list:["是","否"],onChange:i.maskChange},null,8,["onChange"])])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-221b2087"]]);export{H as default};
