import{h as e,j as i,m as a,k as o,l as t,n as r,p as s,r as d,o as n,c as l,w as h,a as g,q as u,s as m,u as p,e as c,i as y}from"./index-C3UXxwfW.js";import{_ as w}from"./up-icon.BrIVCe5a.js";import{r as f}from"./uni-app.es.CqYlZVXb.js";import{_ as b}from"./up-transition.CkVV8kmf.js";import{_}from"./_plugin-vue_export-helper.BCo6x5W8.js";const S=_({name:"up-image",mixins:[a,o,e({props:{src:{type:String,default:()=>i.image.src},mode:{type:String,default:()=>i.image.mode},width:{type:[String,Number],default:()=>i.image.width},height:{type:[String,Number],default:()=>i.image.height},shape:{type:String,default:()=>i.image.shape},radius:{type:[String,Number],default:()=>i.image.radius},lazyLoad:{type:Boolean,default:()=>i.image.lazyLoad},showMenuByLongpress:{type:Boolean,default:()=>i.image.showMenuByLongpress},loadingIcon:{type:String,default:()=>i.image.loadingIcon},errorIcon:{type:String,default:()=>i.image.errorIcon},showLoading:{type:Boolean,default:()=>i.image.showLoading},showError:{type:Boolean,default:()=>i.image.showError},fade:{type:Boolean,default:()=>i.image.fade},webp:{type:Boolean,default:()=>i.image.webp},duration:{type:[String,Number],default:()=>i.image.duration},bgColor:{type:String,default:()=>i.image.bgColor}}})],data(){return{isError:!1,loading:!0,opacity:1,durationTime:this.duration,backgroundStyle:{},show:!1}},watch:{src:{immediate:!0,handler(e){e?(this.isError=!1,this.loading=!0):this.isError=!0}}},computed:{wrapStyle(){let e={};return e.width=t(this.width),e.height=t(this.height),e.borderRadius="circle"==this.shape?"10000px":t(this.radius),e.overflow=this.radius>0?"hidden":"visible",r(e,s(this.customStyle))}},mounted(){this.show=!0},emits:["click","error","load"],methods:{addUnit:t,onClick(){this.$emit("click")},onErrorHandler(e){this.loading=!1,this.isError=!0,this.$emit("error",e)},onLoadHandler(e){this.loading=!1,this.isError=!1,this.$emit("load",e),this.removeBgColor()},removeBgColor(){this.backgroundStyle={backgroundColor:"transparent"}}}},[["render",function(e,i,a,o,t,r){const s=c,_=f(d("up-icon"),w),S=y,k=f(d("up-transition"),b);return n(),l(k,{mode:"fade",show:t.show,duration:e.fade?1e3:0},{default:h((()=>[g(S,{class:"up-image",onClick:r.onClick,style:u([r.wrapStyle,t.backgroundStyle])},{default:h((()=>[t.isError?m("",!0):(n(),l(s,{key:0,src:e.src,mode:e.mode,onError:r.onErrorHandler,onLoad:r.onLoadHandler,"show-menu-by-longpress":e.showMenuByLongpress,"lazy-load":e.lazyLoad,class:"up-image__image",style:u({borderRadius:"circle"==e.shape?"10000px":r.addUnit(e.radius),width:r.addUnit(e.width),height:r.addUnit(e.height)})},null,8,["src","mode","onError","onLoad","show-menu-by-longpress","lazy-load","style"])),e.showLoading&&t.loading?(n(),l(S,{key:1,class:"up-image__loading",style:u({borderRadius:"circle"==e.shape?"50%":r.addUnit(e.radius),backgroundColor:this.bgColor,width:r.addUnit(e.width),height:r.addUnit(e.height)})},{default:h((()=>[p(e.$slots,"loading",{},(()=>[g(_,{name:e.loadingIcon,width:e.width,height:e.height},null,8,["name","width","height"])]),!0)])),_:3},8,["style"])):m("",!0),e.showError&&t.isError&&!t.loading?(n(),l(S,{key:2,class:"up-image__error",style:u({borderRadius:"circle"==e.shape?"50%":r.addUnit(e.radius),width:r.addUnit(e.width),height:r.addUnit(e.height)})},{default:h((()=>[p(e.$slots,"error",{},(()=>[g(_,{name:e.errorIcon,width:e.width,height:e.height},null,8,["name","width","height"])]),!0)])),_:3},8,["style"])):m("",!0)])),_:3},8,["onClick","style"])])),_:3},8,["show","duration"])}],["__scopeId","data-v-94583d04"]]);export{S as _};
